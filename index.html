<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì£¼ì‹ ê²Œì„ - ì—¬ëŸ¬ ì¢…ëª©</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f1f5f9;
      padding: 20px;
      text-align: center;
    }
    .container {
      background: #fff;
      border-radius: 12px;
      padding: 30px;
      max-width: 800px;
      margin: auto;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .stock-block {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
    }
    input {
      width: 60px;
      margin: 0 5px;
      padding: 5px;
    }
    button {
      padding: 6px 14px;
      margin: 5px;
      border: none;
      border-radius: 6px;
      background-color: #4f46e5;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #4338ca;
    }
    canvas {
      max-width: 100%;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“Š ë‹¤ì¤‘ ì¢…ëª© ì£¼ì‹ ê²Œì„</h1>
    <p>ğŸ“… í˜„ì¬ ë‚ ì§œ: <span id="day">1</span>ì¼ì°¨</p>
    <p>ğŸ’µ ì”ì•¡: <span id="cash">â‚©1,000,000</span></p>
    <p>ğŸ“Š ì´ ìì‚°: <span id="total">â‚©1,000,000</span></p>
    <button onclick="nextDay()">ë‹¤ìŒ ë‚  â–¶ï¸</button>

    <div id="stocksContainer"></div>

    <canvas id="chartCanvas" height="150"></canvas>
  </div>

  <script>
    let day = 1;
    let cash = 1000000;

    const stocks = {
      "ì‚¼ì„±ì „ì": { price: 50000, owned: 0, history: [50000] },
      "ì¹´ì¹´ì˜¤": { price: 70000, owned: 0, history: [70000] },
      "ë„¤ì´ë²„": { price: 80000, owned: 0, history: [80000] }
    };

    const chart = new Chart(document.getElementById("chartCanvas"), {
      type: 'line',
      data: {
        labels: ['1ì¼ì°¨'],
        datasets: Object.keys(stocks).map((name, i) => ({
          label: name,
          data: stocks[name].history,
          borderColor: ['#3b82f6', '#ef4444', '#10b981'][i],
          fill: false,
          tension: 0.3
        }))
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'bottom' } },
        scales: {
          x: { title: { display: true, text: 'ì¼ì' }},
          y: { title: { display: true, text: 'ì£¼ê°€' }}
        }
      }
    });

    function updateUI() {
      document.getElementById('day').textContent = day;
      document.getElementById('cash').textContent = 'â‚©' + cash.toLocaleString();

      const container = document.getElementById('stocksContainer');
      container.innerHTML = '';

      let total = cash;

      Object.entries(stocks).forEach(([name, stock], index) => {
        total += stock.owned * stock.price;

        const block = document.createElement('div');
        block.className = 'stock-block';
        block.innerHTML = `
          <h3>${name}</h3>
          <p>ğŸ“ˆ í˜„ì¬ ê°€ê²©: <strong>${stock.price.toLocaleString()}ì›</strong></p>
          <p>ğŸ“¦ ë³´ìœ  ì£¼ì‹: ${stock.owned}ì£¼</p>
          <input type="number" min="1" value="1" id="qty-${index}">
          <button onclick="buyStock('${name}', ${index})">ë§¤ìˆ˜</button>
          <button onclick="sellStock('${name}', ${index})">ë§¤ë„</button>
        `;
        container.appendChild(block);
      });

      document.getElementById('total').textContent = 'â‚©' + total.toLocaleString();
    }

    function nextDay() {
      day++;
      chart.data.labels.push(`${day}ì¼ì°¨`);

      Object.entries(stocks).forEach(([name, stock]) => {
        const change = Math.floor(Math.random() * 2001) - 1000; // -1000 ~ +1000
        stock.price = Math.max(1000, stock.price + change);
        stock.history.push(stock.price);
      });

      chart.update();
      updateUI();
    }

    function buyStock(name, idx) {
      const qty = parseInt(document.getElementById(`qty-${idx}`).value);
      const stock = stocks[name];
      const cost = qty * stock.price;

      if (cash >= cost) {
        stock.owned += qty;
        cash -= cost;
        updateUI();
      } else {
        alert("ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.");
      }
    }

    function sellStock(name, idx) {
      const qty = parseInt(document.getElementById(`qty-${idx}`).value);
      const stock = stocks[name];

      if (stock.owned >= qty) {
        stock.owned -= qty;
        cash += qty * stock.price;
        updateUI();
      } else {
        alert("ë³´ìœ  ì£¼ì‹ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.");
      }
    }

    updateUI();
  </script>
</body>
</html>
